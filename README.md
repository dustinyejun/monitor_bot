# æ¨ç‰¹ä¸Solanaç›‘æ§æœºå™¨äºº

ä¸€ä¸ªå…¨é¢çš„åŠ å¯†è´§å¸ç›‘æ§ç³»ç»Ÿï¼Œèƒ½å¤Ÿç›‘æ§æ¨ç‰¹ç”¨æˆ·çš„CAåœ°å€ç›¸å…³æ¨æ–‡ï¼Œä»¥åŠSolanaé’±åŒ…çš„äº¤æ˜“æ´»åŠ¨ï¼Œå¹¶é€šè¿‡ä¼ä¸šå¾®ä¿¡å‘é€é€šçŸ¥ã€‚

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### ğŸ”Œ æ’ä»¶åŒ–ç›‘æ§æ¶æ„
- **å¯æ’æ‹”è®¾è®¡**: é€šè¿‡é…ç½®çµæ´»å¯ç”¨/ç¦ç”¨ç›‘æ§åŠŸèƒ½
- **ç‹¬ç«‹è¿è¡Œ**: å„ç›‘æ§æ’ä»¶ç‹¬ç«‹è¿è¡Œï¼Œäº’ä¸å½±å“
- **ç»Ÿä¸€ç®¡ç†**: é›†ä¸­ç®¡ç†æ‰€æœ‰ç›‘æ§æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸ
- **æ˜“äºæ‰©å±•**: å¿«é€Ÿæ·»åŠ æ–°çš„ç›‘æ§ç±»å‹

### ğŸ“± Twitterç›‘æ§æ’ä»¶
- **æ™ºèƒ½CAåœ°å€è¯†åˆ«**: æ”¯æŒå¤šé“¾åœ°å€è¯†åˆ« (Ethereum, BSC, Solana, Polygonç­‰)
- **ç”¨æˆ·æ¨æ–‡ç›‘æ§**: å®æ—¶ç›‘æ§æŒ‡å®šç”¨æˆ·çš„æ¨æ–‡æ›´æ–°
- **å†…å®¹åˆ†æ**: å…³é”®è¯è¯†åˆ«ã€é£é™©è¯„åˆ†ã€ç½®ä¿¡åº¦è®¡ç®—
- **è¿‡æ»¤ç³»ç»Ÿ**: åŸºäºç½®ä¿¡åº¦å’Œé£é™©è¯„åˆ†çš„æ™ºèƒ½è¿‡æ»¤

### ğŸ’° Solanaç›‘æ§æ’ä»¶
- **é’±åŒ…äº¤æ˜“ç›‘æ§**: å®æ—¶ç›‘æ§Solanaé’±åŒ…çš„æ‰€æœ‰äº¤æ˜“
- **å¤šDEXæ”¯æŒ**: æ”¯æŒRaydium, Jupiter, Orcaç­‰ä¸»æµDEX
- **äº¤æ˜“åˆ†æ**: è‡ªåŠ¨è¯†åˆ«è½¬è´¦ã€äº¤æ¢ã€æµåŠ¨æ€§æ“ä½œç­‰
- **ä»·å€¼è®¡ç®—**: å®æ—¶USDä»·å€¼è®¡ç®—å’Œé£é™©è¯„ä¼°

### ğŸ”” æ™ºèƒ½é€šçŸ¥ç³»ç»Ÿ
- **å¤šæ¸ é“æ”¯æŒ**: ä¼ä¸šå¾®ä¿¡ã€é‚®ä»¶ã€çŸ­ä¿¡ç­‰å¤šç§é€šçŸ¥æ¸ é“
- **è§„åˆ™å¼•æ“**: åŸºäºæ¡ä»¶è‡ªåŠ¨è§¦å‘é€šçŸ¥ï¼Œæ”¯æŒå¤æ‚é€»è¾‘åˆ¤æ–­
- **æ¨¡æ¿åŒ–æ¶ˆæ¯**: é¢„å®šä¹‰æ¶ˆæ¯æ¨¡æ¿ï¼Œæ”¯æŒå˜é‡æ›¿æ¢
- **æ™ºèƒ½å»é‡**: æ—¶é—´çª—å£å»é‡ï¼Œé¿å…é‡å¤é€šçŸ¥
- **é™æµä¿æŠ¤**: é˜²æ­¢é€šçŸ¥é£æš´ï¼Œæ”¯æŒè§„åˆ™çº§é™æµé…ç½®
- **é‡è¯•æœºåˆ¶**: å¤±è´¥é€šçŸ¥è‡ªåŠ¨é‡è¯•ï¼Œç¡®ä¿æ¶ˆæ¯é€è¾¾
- **ç»Ÿè®¡ç›‘æ§**: å®Œæ•´çš„å‘é€ç»Ÿè®¡å’ŒæˆåŠŸç‡ç›‘æ§

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

- **åç«¯æ¡†æ¶**: FastAPI
- **æ’ä»¶ç³»ç»Ÿ**: å¯æ’æ‹”ç›‘æ§æ¶æ„
- **æ•°æ®åº“**: PostgreSQL + SQLAlchemy ORM
- **ä»»åŠ¡è°ƒåº¦**: å¼‚æ­¥ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
- **HTTPå®¢æˆ·ç«¯**: aiohttp (å¼‚æ­¥)
- **æ•°æ®éªŒè¯**: Pydantic v2
- **æ—¥å¿—ç³»ç»Ÿ**: loguru
- **ä¾èµ–ç®¡ç†**: UV
- **å®¹å™¨åŒ–**: Docker + docker-compose

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.9+
- PostgreSQL 12+
- UVåŒ…ç®¡ç†å™¨

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd monitor_bot
```

2. **å®‰è£…ä¾èµ–**
```bash
uv sync --dev
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„APIå¯†é’¥å’Œæ•°æ®åº“è¿æ¥
```

4. **æ•°æ®åº“åˆå§‹åŒ–**
```bash
# åˆ›å»ºæ•°æ®åº“è¿ç§»
uv run alembic revision --autogenerate -m "Initial migration"

# æ‰§è¡Œè¿ç§»
uv run alembic upgrade head
```

5. **è¿è¡Œæµ‹è¯•**
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
uv run pytest

# æµ‹è¯•æ¨ç‰¹APIè¿æ¥
uv run python tests/test_real_twitter_api.py

# æµ‹è¯•Solana RPCè¿æ¥
uv run python tests/test_solana_rpc.py
```

### é…ç½®è¯´æ˜

#### å¿…è¦é…ç½®

```env
# æ•°æ®åº“
DATABASE_URL=postgresql://user:password@localhost:5432/monitor_bot

# Twitter API
TWITTER_BEARER_TOKEN=your_twitter_bearer_token_here

# Solana RPCé…ç½®ï¼ˆå¤šèŠ‚ç‚¹æ•°ç»„æ ¼å¼ï¼‰
SOLANA_RPC_MAINNET_URLS=https://api.mainnet-beta.solana.com,https://backup-node.com
SOLANA_RPC_DEVNET_URLS=https://api.devnet.solana.com
SOLANA_DEFAULT_NETWORK=mainnet

# ä¼ä¸šå¾®ä¿¡
WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your_key

# ç›‘æ§æ’ä»¶é…ç½®
ENABLED_MONITORS=twitter,solana
```

#### å¯é€‰é…ç½®

```env
# ç›‘æ§é—´éš”
TWITTER_CHECK_INTERVAL=60
SOLANA_CHECK_INTERVAL=30

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO

# åº”ç”¨é…ç½®
DEBUG=False
```

## ğŸ“Š APIæ¥å£

### æ¨ç‰¹ç›‘æ§

```bash
# æ·»åŠ ç›‘æ§ç”¨æˆ·
POST /api/twitter/users
{
    "username": "elonmusk",
    "display_name": "Elon Musk"
}

# è·å–ç”¨æˆ·åˆ—è¡¨
GET /api/twitter/users

# è·å–ç”¨æˆ·æ¨æ–‡
GET /api/twitter/users/{username}/tweets

# è·å–åŒ…å«CAåœ°å€çš„æ¨æ–‡
GET /api/twitter/ca-tweets
```

### Solanaç›‘æ§

```bash
# æ·»åŠ ç›‘æ§é’±åŒ…
POST /api/solana/wallets
{
    "address": "wallet_address_here",
    "label": "My Wallet",
    "exclude_tokens": ["token1", "token2"]
}

# è·å–é’±åŒ…åˆ—è¡¨
GET /api/solana/wallets

# è·å–é’±åŒ…äº¤æ˜“
GET /api/solana/wallets/{address}/transactions

# è·å–é’±åŒ…ä½™é¢
GET /api/solana/wallets/{address}/balance
```

### é€šçŸ¥ç³»ç»Ÿ

```bash
# å‘é€é€šçŸ¥
POST /api/notification/send
{
    "type": "system",
    "title": "ç³»ç»Ÿé€šçŸ¥",
    "content": "é€šçŸ¥å†…å®¹"
}

# ä½¿ç”¨æ¨¡æ¿å‘é€
POST /api/notification/send-by-template
{
    "template_name": "twitter_ca_alert",
    "variables": {"username": "test"}
}

# è·å–é€šçŸ¥ç»Ÿè®¡
GET /api/notification/stats

# ç®¡ç†é€šçŸ¥æ¨¡æ¿
GET /api/notification/templates
POST /api/notification/templates

# ç®¡ç†é€šçŸ¥è§„åˆ™
GET /api/notification/rules
POST /api/notification/rules
```

### ç³»ç»Ÿç›‘æ§

```bash
# è·å–ç³»ç»ŸçŠ¶æ€
GET /api/system/health

# è·å–ç»Ÿè®¡ä¿¡æ¯
GET /api/system/stats

# è·å–æœªå¤„ç†äº‹ä»¶
GET /api/system/pending-events
```

## ğŸ§ª æµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
uv run pytest tests/test_twitter_services.py
uv run pytest tests/test_solana_services.py

# è¿è¡ŒçœŸå®APIæµ‹è¯•
uv run python tests/test_real_twitter_api.py
```

### æµ‹è¯•è¦†ç›–

- **æ¨ç‰¹æœåŠ¡**: APIå®¢æˆ·ç«¯ã€å†…å®¹åˆ†æã€ç›‘æ§æœåŠ¡
- **SolanaæœåŠ¡**: RPCå®¢æˆ·ç«¯ã€äº¤æ˜“åˆ†æã€é’±åŒ…ç›‘æ§
- **é€šçŸ¥ç³»ç»Ÿ**: é€šçŸ¥å‘é€ã€æ¨¡æ¿ç®¡ç†ã€è§„åˆ™å¼•æ“ã€é™æµå»é‡
- **æ’ä»¶ç³»ç»Ÿ**: æ’ä»¶ç”Ÿå‘½å‘¨æœŸã€ç›‘æ§ç®¡ç†å™¨ã€çŠ¶æ€ç®¡ç†
- **æ•°æ®æ¨¡å‹**: æ•°æ®åº“æ¨¡å‹å’ŒPydantic schemas
- **é›†æˆæµ‹è¯•**: ç«¯åˆ°ç«¯å·¥ä½œæµæµ‹è¯•

## ğŸ“ é¡¹ç›®ç»“æ„

```
monitor_bot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ settings.py  # ç¯å¢ƒé…ç½®
â”‚   â”‚   â””â”€â”€ database.py  # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ models/          # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ twitter.py   # æ¨ç‰¹ç›¸å…³æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ solana.py    # Solanaç›¸å…³æ¨¡å‹
â”‚   â”‚   â””â”€â”€ notification.py # é€šçŸ¥ç›¸å…³æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/         # Pydanticæ¨¡å¼
â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ monitor_plugin.py    # ç›‘æ§æ’ä»¶åŸºç±»
â”‚   â”‚   â””â”€â”€ monitor_manager.py   # ç›‘æ§ç®¡ç†å™¨
â”‚   â”œâ”€â”€ plugins/         # ç›‘æ§æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ twitter_monitor_plugin.py  # Twitterç›‘æ§æ’ä»¶
â”‚   â”‚   â””â”€â”€ solana_monitor_plugin.py   # Solanaç›‘æ§æ’ä»¶
â”‚   â”œâ”€â”€ services/        # æ ¸å¿ƒä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ twitter_*         # TwitteræœåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ solana_*          # SolanaæœåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ notification_*    # é€šçŸ¥æœåŠ¡ç»„ä»¶
â”‚   â”‚   â””â”€â”€ rate_limiter.py   # é™æµå»é‡æœåŠ¡
â”‚   â”œâ”€â”€ api/             # FastAPIè·¯ç”±
â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/               # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ migrations/          # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ examples/            # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ docker/             # Dockeré…ç½®
â””â”€â”€ docs/               # æ–‡æ¡£
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ç›‘æ§ç›®æ ‡

1. **åˆ›å»ºæ•°æ®æ¨¡å‹**
```python
# src/models/new_service.py
class NewServiceModel(BaseModel):
    address = Column(String, unique=True)
    label = Column(String)
    # ... å…¶ä»–å­—æ®µ
```

2. **å®ç°å®¢æˆ·ç«¯**
```python
# src/services/new_service_client.py
class NewServiceClient:
    async def get_data(self, address: str):
        # å®ç°æ•°æ®è·å–é€»è¾‘
        pass
```

3. **æ·»åŠ åˆ†æå™¨**
```python
# src/services/new_service_analyzer.py
class NewServiceAnalyzer:
    async def analyze_data(self, data):
        # å®ç°åˆ†æé€»è¾‘
        pass
```

4. **åˆ›å»ºç›‘æ§æœåŠ¡**
```python
# src/services/new_service_monitor.py
class NewServiceMonitor:
    async def start_monitoring(self):
        # å®ç°ç›‘æ§é€»è¾‘
        pass
```

### è‡ªå®šä¹‰é€šçŸ¥æ¨¡æ¿

```python
# src/services/notification_service.py
def create_custom_template(self, event_type: str, data: Dict):
    templates = {
        "custom_event": {
            "msgtype": "markdown",
            "markdown": {
                "content": f"## è‡ªå®šä¹‰äº‹ä»¶é€šçŸ¥\nå†…å®¹: {data}"
            }
        }
    }
    return templates.get(event_type)
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **å¼‚æ­¥å¤„ç†**: æ‰€æœ‰IOæ“ä½œä½¿ç”¨async/await
- **è¿æ¥æ± **: æ•°æ®åº“å’ŒHTTPè¿æ¥å¤ç”¨
- **æ‰¹é‡æ“ä½œ**: æ•°æ®åº“æ‰¹é‡æ’å…¥å’Œæ›´æ–°
- **ç¼“å­˜æœºåˆ¶**: APIå“åº”å’Œä»·æ ¼æ•°æ®ç¼“å­˜
- **é”™è¯¯é‡è¯•**: æŒ‡æ•°é€€é¿é‡è¯•ç­–ç•¥

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ¨ç‰¹APIé™åˆ¶**
```bash
# æ£€æŸ¥APIé™åˆ¶çŠ¶æ€
uv run python check_rate_limit.py
```

2. **Solana RPCè¿æ¥é—®é¢˜**
```bash
# æµ‹è¯•RPCè¿æ¥
uv run python tests/test_solana_rpc.py
```

3. **æ•°æ®åº“è¿æ¥é—®é¢˜**
```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
uv run python -c "from src.config.database import engine; print(engine.execute('SELECT 1'))"
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (å½“å‰)
- âœ… æ’ä»¶åŒ–ç›‘æ§ç³»ç»Ÿæ¶æ„
- âœ… æ¨ç‰¹ç›‘æ§åŠŸèƒ½å®Œæ•´å®ç°
- âœ… Solanaç›‘æ§åŠŸèƒ½å®Œæ•´å®ç°
- âœ… æ™ºèƒ½é€šçŸ¥æ¨é€ç³»ç»Ÿ
- âœ… è§„åˆ™å¼•æ“å’Œæ¨¡æ¿ç®¡ç†
- âœ… é™æµå»é‡æœºåˆ¶
- âœ… å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–
- âœ… çœŸå®APIé›†æˆæµ‹è¯•
- ğŸ”„ Webç®¡ç†ç•Œé¢ (è®¡åˆ’ä¸­)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add AmazingFeature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£ã€å¿«é€Ÿçš„Webæ¡†æ¶
- [SQLAlchemy](https://www.sqlalchemy.org/) - Python SQLå·¥å…·åŒ…
- [Solana](https://solana.com/) - é«˜æ€§èƒ½åŒºå—é“¾å¹³å°
- [Twitter API](https://developer.twitter.com/) - æ¨ç‰¹å¼€å‘è€…å¹³å°

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- åˆ›å»º GitHub Issue
- å‘é€é‚®ä»¶åˆ°: [support@example.com](mailto:support@example.com)
- é¡¹ç›®æ–‡æ¡£: [docs/](docs/)

---

**âš ï¸ å…è´£å£°æ˜**: æœ¬è½¯ä»¶ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰ï¼Œè¯·ç¡®ä¿éµå®ˆç›¸å…³APIçš„ä½¿ç”¨æ¡æ¬¾å’Œå½“åœ°æ³•å¾‹æ³•è§„ã€‚