# SOL_TRANSFERåŠŸèƒ½ - ç¬¬ä¸‰é˜¶æ®µå®ç°è®°å½•

## å®ç°æ¦‚è¿°
- **å®Œæˆæ—¥æœŸ**: 2025-08-21
- **é˜¶æ®µ**: ç¬¬ä¸‰é˜¶æ®µ - æ¨¡æ¿å’Œé€šçŸ¥å¢å¼ºï¼ˆç®€åŒ–ç‰ˆï¼‰
- **åŠŸèƒ½ç›®æ ‡**: å®ç°SOLè½¬è´¦é€šçŸ¥ä¸­æ˜¾ç¤ºè½¬è´¦æ–¹å‘å’Œå¯¹æ–¹åœ°å€

## æ ¸å¿ƒå®ç°

### 1. é€šçŸ¥æ¨¡æ¿å¢å¼º (src/config/notification_config.py)
```python
content_template="""ğŸ’° **æ£€æµ‹åˆ°Solanaäº¤æ˜“**

ğŸ‘› **é’±åŒ…ä¿¡æ¯**
- åœ°å€: `{wallet_address}`
- åˆ«å: {wallet_alias}

ğŸ“Š **äº¤æ˜“è¯¦æƒ…** 
- ç±»å‹: {transaction_type}
- é‡‘é¢: {amount} {token_symbol}
- ä»£å¸: {token_name} ({token_symbol})

{sol_transfer_info}  # æ–°å¢å ä½ç¬¦

{dex_swap_info}

â° **æ—¶é—´**: {block_time}"""
```

### 2. é€šçŸ¥é€»è¾‘å¢å¼º (src/plugins/solana_monitor_plugin.py)
åœ¨ `_trigger_single_notification` æ–¹æ³•ä¸­æ·»åŠ äº†SOL_TRANSFERå¤„ç†é€»è¾‘ï¼š

```python
# å¦‚æœæ˜¯SOLè½¬è´¦ï¼Œè·å–è½¬è´¦è¯¦æƒ…
if analysis.transaction_type == TransactionType.SOL_TRANSFER and analysis.transfer_info:
    try:
        # è·å–è½¬è´¦æ–¹å‘å’Œå¯¹æ–¹åœ°å€
        direction = analysis.transfer_info.direction
        counterpart_address = analysis.transfer_info.counterpart_address
        
        if direction and counterpart_address:
            # æ ¼å¼åŒ–è½¬è´¦æ–¹å‘æ–‡æœ¬
            direction_text = "è½¬å…¥" if direction == "in" else "è½¬å‡º"
            
            # æ ¼å¼åŒ–SOLè½¬è´¦ä¿¡æ¯ï¼ˆç®€åŒ–ç‰ˆï¼‰
            sol_transfer_info = f"""ğŸ’¸ **è½¬è´¦è¯¦æƒ…**
- æ–¹å‘: {direction_text}
- å¯¹æ–¹åœ°å€: `{counterpart_address}`"""
            
            # æ›´æ–°é€šçŸ¥æ•°æ®
            notification_data.update({
                "transfer_direction": direction,
                "transfer_direction_text": direction_text,
                "counterpart_address": counterpart_address,
                "sol_transfer_info": sol_transfer_info
            })
            
    except Exception as e:
        logger.error(f"è·å–SOLè½¬è´¦è¯¦æƒ…å¤±è´¥: {e}")
        # ä¿æŒé»˜è®¤çš„ç©ºä¿¡æ¯ï¼Œä¸å½±å“é€šçŸ¥å‘é€
```

## åŠŸèƒ½ç‰¹æ€§
- âœ… **æ™ºèƒ½æ–¹å‘æ˜¾ç¤º**: æ ¹æ®directionå­—æ®µè‡ªåŠ¨æ˜¾ç¤º"è½¬å…¥"æˆ–"è½¬å‡º"
- âœ… **å¯¹æ–¹åœ°å€æ˜¾ç¤º**: å®Œæ•´æ˜¾ç¤ºè½¬è´¦å¯¹æ–¹çš„é’±åŒ…åœ°å€
- âœ… **ç®€åŒ–è®¾è®¡**: ä¸åŒ…å«åœ°å€æ ‡ç­¾ï¼Œé™ä½å¤æ‚åº¦
- âœ… **å¼‚å¸¸å¤„ç†**: ä¿¡æ¯ç¼ºå¤±æ—¶è¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œä¸å½±å“é€šçŸ¥
- âœ… **å‘åå…¼å®¹**: ä¸ç°æœ‰DEX_SWAPé€šçŸ¥åŠŸèƒ½å¹¶è¡Œå·¥ä½œ

## é€šçŸ¥æ•ˆæœç¤ºä¾‹

### SOLè½¬å‡ºé€šçŸ¥
```
ğŸ’° **æ£€æµ‹åˆ°Solanaäº¤æ˜“**

ğŸ‘› **é’±åŒ…ä¿¡æ¯**
- åœ°å€: `AbcD...XyZ`
- åˆ«å: æµ‹è¯•é’±åŒ…

ğŸ“Š **äº¤æ˜“è¯¦æƒ…** 
- ç±»å‹: sol_transfer
- é‡‘é¢: 5.5 SOL
- ä»£å¸: Solana (SOL)

ğŸ’¸ **è½¬è´¦è¯¦æƒ…**
- æ–¹å‘: è½¬å‡º
- å¯¹æ–¹åœ°å€: `5tzF...Sp`

â° **æ—¶é—´**: 2025-08-21 16:30:00
```

### SOLè½¬å…¥é€šçŸ¥
```
ğŸ’¸ **è½¬è´¦è¯¦æƒ…**
- æ–¹å‘: è½¬å…¥
- å¯¹æ–¹åœ°å€: `9xYz...Abc`
```

## æµ‹è¯•éªŒè¯
- âœ… æ¨¡æ¿å ä½ç¬¦è§£ææ­£å¸¸
- âœ… è½¬å…¥/è½¬å‡ºåœºæ™¯æ˜¾ç¤ºæ­£ç¡®
- âœ… è¾¹ç•Œæƒ…å†µå¤„ç†å®Œå–„
- âœ… å¼‚å¸¸ä¸å½±å“ä¸»æµç¨‹

## æ•°æ®ç»“æ„
é€šçŸ¥æ•°æ®ä¸­æ–°å¢å­—æ®µï¼š
- `sol_transfer_info`: æ ¼å¼åŒ–çš„è½¬è´¦è¯¦æƒ…å­—ç¬¦ä¸²
- `transfer_direction`: åŸå§‹æ–¹å‘å€¼ ("in"/"out")
- `transfer_direction_text`: ä¸­æ–‡æ–¹å‘æ–‡æœ¬ ("è½¬å…¥"/"è½¬å‡º")
- `counterpart_address`: å¯¹æ–¹é’±åŒ…åœ°å€

## ç®€åŒ–ç‰ˆä¼˜åŠ¿
1. **å¼€å‘æ•ˆç‡é«˜**: æ— éœ€ç»´æŠ¤åœ°å€æ•°æ®åº“
2. **æ€§èƒ½ä¼˜ç§€**: æ— é¢å¤–æŸ¥è¯¢å¼€é”€
3. **ç»´æŠ¤ç®€å•**: ä»£ç é€»è¾‘æ¸…æ™°
4. **æ‰©å±•æ€§å¥½**: åç»­å¯æŒ‰éœ€æ·»åŠ åœ°å€æ ‡è¯†åŠŸèƒ½

## æŠ€æœ¯è¦ç‚¹
- åˆ©ç”¨ç¬¬ä¸€é˜¶æ®µå·²å®ç°çš„directionå’Œcounterpart_addresså­—æ®µ
- ä¸DEX_SWAPé€šçŸ¥é€»è¾‘å¹¶è¡Œï¼Œäº’ä¸å½±å“
- å®Œæ•´çš„é”™è¯¯å¤„ç†ï¼Œç¡®ä¿é€šçŸ¥ç³»ç»Ÿç¨³å®šæ€§
- æ¨¡æ¿ç³»ç»Ÿçš„çµæ´»è¿ç”¨ï¼Œæ”¯æŒåŠ¨æ€å†…å®¹å¡«å……